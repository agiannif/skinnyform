<!--
  MULTI-CLIENT CONFIGURATION:
  Skinnyform routes form submissions to different emails based on the origin of the request.

  Your form's origin (e.g., https://yoursite.com) must be configured in the server's
  CLIENT_ORIGINS environment variable. The server will route submissions from your origin
  to the corresponding email address in CLIENT_EMAILS.

  Update the action URL below to point to your skinnyform server instance.
  Example: action="https://forms.yourserver.com/skinnyform/send"

  The server will only send emails if your origin matches a configured CLIENT_ORIGINS entry.
-->

<form id="fs-form" name="simple-contact-form" accept-charset="utf-8" action="https://example.com/skinnyform/send"
  method="post">
  <fieldset id="fs-form-inputs">
    <label for="full-name">Your name</label>
    <input type="text" name="name" id="full-name" placeholder="e.g. John" required>

    <label for="email-address">Email address</label>
    <input type="email" name="_replyto" id="email-address" placeholder="email@example.com" required>

    <label for="message">Message</label>
    <textarea rows="9" name="message" id="message" placeholder="Your messageâ€¦" required minlength="10"></textarea>

    <!--
      HONEYPOT FIELD FOR SPAM PROTECTION:
      The 'website' field is hidden from users but visible to bots.
      If this field is filled, the server accepts the request but does not send the email.
      Do not remove or rename this field.
    -->
    <input type="text" name="website" id="website" value="" style="display:none" tabindex="-1" autocomplete="off"
      aria-hidden="true">
  </fieldset>

  <input type="submit" class="button button-primary" value="Send">
</form>

<script>
  const form = document.getElementById('fs-form');
  const submitButton = form.querySelector('input[type="submit"]');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // Disable submit button during request
    const originalValue = submitButton.value;
    submitButton.disabled = true;
    submitButton.value = 'Sending...';

    const data = Object.fromEntries(new FormData(form));

    try {
      const res = await fetch(form.action, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data),
      });

      if (res.ok) {
        alert('Form submitted successfully!');
        form.reset();
      } else {
        alert('Form submission failed. Please try again.');
        console.error('Server responded with:', res.status);
      }
    } catch (err) {
      console.error('Error submitting form:', err);
      alert('Error submitting form. Please check your connection and try again.');
    } finally {
      submitButton.disabled = false;
      submitButton.value = originalValue;
    }
  });
</script>